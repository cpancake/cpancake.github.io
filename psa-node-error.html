<!DOCTYPE html>
<html>
    <head>
        <title>PSA: Node.js NPM Visual Studio Error - andrew rogers: programming stuff</title>
        <meta charset="utf-8" />
        <link href="/theme/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/theme/css/pygments.css" rel="stylesheet" />
        <link href="/theme/css/style.css" rel="stylesheet" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    </head>

    <body id="index" class="archive">
        <div class="container">
            <div class="header">
                <ul class="nav nav-pills pull-right">
                    <li class=""><a href="/">Home</a></li>
                    <li><a href="/archives.html">Archives</a></li>
                </ul>
                <h3 class="text-muted"><a href="/">andrew rogers: programming stuff</a></h3>
				<h2 class="text-muted"></h2>
             </div>
<section id="content" class="article content">
  <header>
    <h2 class="entry-title">
      <a href="/psa-node-error.html" rel="bookmark"
         title="Permalink to PSA: Node.js NPM Visual Studio Error">PSA: Node.js NPM Visual Studio Error</a></h2>
 
    <div class="post-info text-muted">
      Posted on <abbr class="published" title="2014-07-28T22:03:00">
        Mon 28 July 2014
      </abbr>
      <address class="vcard author">
        by <a class="url fn" href="/author/cpancake.html">cpancake</a>
      </address> in <a href="/category/posts.html">Posts</a> 
      Tagged <a href="/tag/programming.html">programming </a>    </div><!-- /.post-info -->
  </header>
     
  <div class="entry-content">
    <p>If you are, like me, developing on Windows, and you, like me, have multiple versions of Visual Studio installed, you might see this error when a Node.js package needs to build something:</p>
<div class="highlight"><pre><span class="nl">C:</span><span class="err">\</span><span class="n">Program</span> <span class="n">Files</span> <span class="p">(</span><span class="n">x86</span><span class="p">)</span><span class="err">\</span><span class="n">MSBuild</span><span class="err">\</span><span class="n">Microsoft</span><span class="p">.</span><span class="n">Cpp</span><span class="err">\</span><span class="n">v4</span><span class="mf">.0</span><span class="err">\</span><span class="n">V120</span><span class="err">\</span><span class="n">Microsoft</span><span class="p">.</span><span class="n">Cpp</span><span class="p">.</span><span class="n">Platform</span><span class="p">.</span><span class="n">targets</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span><span class="o">:</span> <span class="n">error</span> <span class="n">MSB8020</span><span class="o">:</span> <span class="n">The</span> <span class="n">build</span> <span class="n">tools</span> <span class="k">for</span> <span class="n">Visual</span> <span class="n">Studio</span> <span class="mi">2010</span> <span class="p">(</span><span class="n">Platform</span> <span class="n">Toolset</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">v100</span><span class="err">&#39;</span><span class="p">)</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">found</span><span class="p">.</span> <span class="n">To</span> <span class="n">build</span> <span class="n">using</span> <span class="n">the</span> <span class="n">v100</span> <span class="n">build</span> <span class="n">tools</span><span class="p">,</span> <span class="n">please</span> <span class="n">install</span> <span class="n">Visual</span> <span class="n">Studio</span> <span class="mi">2010</span> <span class="n">build</span> <span class="n">tools</span><span class="p">.</span>  <span class="n">Alternatively</span><span class="p">,</span> <span class="n">you</span> <span class="n">may</span> <span class="n">upgrade</span> <span class="n">to</span> <span class="n">the</span> <span class="n">current</span> <span class="n">Visual</span> <span class="n">Studio</span> <span class="n">tools</span> <span class="n">by</span> <span class="n">selecting</span> <span class="n">the</span> <span class="n">Project</span> <span class="n">menu</span> <span class="n">or</span> <span class="n">right</span><span class="o">-</span><span class="n">click</span> <span class="n">the</span> <span class="n">solution</span><span class="p">,</span> <span class="n">and</span> <span class="n">then</span> <span class="n">selecting</span> <span class="s">&quot;Upgrade Solution...&quot;</span><span class="p">.</span> <span class="p">[</span><span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">wamp</span><span class="err">\</span><span class="n">node</span><span class="err">\</span><span class="n">spotify</span><span class="err">\</span><span class="n">node_modules</span><span class="err">\</span><span class="n">spotify</span><span class="o">-</span><span class="n">web</span><span class="err">\</span><span class="n">node_modules</span><span class="err">\</span><span class="n">ws</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">bufferutil</span><span class="p">.</span><span class="n">vcxproj</span><span class="p">]</span>
</pre></div>


<p>This is an annoying and unfortunately common error for me when installing packages through NPM. After scouring the internet, it turns out that this is an error with gyp, meaning that neither the NPM or node-gyp folks can fix it. However, you can pass a command line parameter to npm to specify what version to build with:</p>
<div class="highlight"><pre><span class="n">npm</span> <span class="n">install</span> <span class="n">spotify</span><span class="o">-</span><span class="n">web</span> <span class="o">-</span><span class="n">msvs_version</span><span class="o">=</span><span class="mi">2013</span>
</pre></div>


<p>This parameter specifies what version of Visual Studio the library should build with. You can use any version, but I prefer the latest (2013).</p>
  </div><!-- /.entry-content -->
</section>
    <div class="comment">
        <div id="disqus_thread"></div> <!-- comment app container -->
    </div>
	<!-- Comment BEGIN -->
    <script type="text/javascript">
        var disqus_shortname = 'commiesprogblog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
     <!-- Comment END -->
            <footer id="contentinfo" class="footer">
                    <nav class="pull-right bottom-nav">
                        <a href="/None">RSS</a>
                    </nav>
                    <address id="about" class="vcard body">
                    &copy; <a href="">andrew rogers: programming stuff</a> Proudly powered by <a href="http://getpelican.com/">Pelican</a>
                    </address><!-- /#about -->
            </footer><!-- /#contentinfo -->
        </div><!-- container -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
	var pageTracker = _gat._getTracker("UA-51284727-1");
pageTracker._trackPageview();
} catch(err) {}</script>
    </body>
</html>